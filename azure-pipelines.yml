trigger:
- azure-pipelines

strategy:
  matrix:
    linux:
      imageName: "ubuntu-16.04"
    mac:
      imageName: "macos-10.13"


pool:
  vmImage: $(imageName)

steps:
- script: |
    ./contrib/setup-btor2tools.sh
    ./contrib/setup-cadical.sh
    ./contrib/setup-lingeling.sh
  displayName: 'Setup dependencies'

- script: ./configure.sh -g
  displayName: 'Configure Boolector'

- script: |
    cd build
    make -j $(nproc)
  displayName: 'Build Boolector'

- script: ctest -j$(nproc)
  displayName: 'Run CTest'
